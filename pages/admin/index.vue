<script setup>
definePageMeta({
  layout: 'admin',
  title: 'ç®¡ç†åå°',
  middleware: ['admin-auth'],
})

// å›¾è¡¨æ•°æ®
// const visitorsChart = ref([60, 80, 40, 70, 90, 50, 75])
// const salesChart = ref([45, 65, 35, 80, 70, 85, 60])
// const ordersChart = ref([30, 50, 70, 45, 60, 40, 55])
// const usersChart = ref([20, 40, 60, 80, 50, 70, 90])

const chartData = ref([
  { date: 'å‘¨ä¸€', value: 60 },
  { date: 'å‘¨äºŒ', value: 80 },
  { date: 'å‘¨ä¸‰', value: 40 },
  { date: 'å‘¨å››', value: 70 },
  { date: 'å‘¨äº”', value: 90 },
  { date: 'å‘¨å…­', value: 50 },
  { date: 'å‘¨æ—¥', value: 75 },
])

// æ´»åŠ¨æ•°æ®
const activities = ref([
  {
    type: 'user',
    icon: 'i-carbon:user-plus',
    title: 'æ–°ç”¨æˆ·æ³¨å†Œ',
    description: 'ç”¨æˆ· å¼ ä¸‰ å®Œæˆäº†æ³¨å†Œ',
    time: '2åˆ†é’Ÿå‰',
    status: 'success',
  },
  {
    type: 'order',
    icon: 'i-carbon:shopping-cart',
    title: 'æ–°è®¢å•åˆ›å»º',
    description: 'è®¢å• #12345 ç­‰å¾…å¤„ç†',
    time: '10åˆ†é’Ÿå‰',
    status: 'pending',
  },
  {
    type: 'content',
    icon: 'i-carbon:document-add',
    title: 'å†…å®¹æ›´æ–°',
    description: 'äº§å“é¡µé¢å†…å®¹å·²æ›´æ–°',
    time: '30åˆ†é’Ÿå‰',
    status: 'success',
  },
  {
    type: 'system',
    icon: 'i-carbon:notification',
    title: 'ç³»ç»Ÿé€šçŸ¥',
    description: 'ç³»ç»Ÿç»´æŠ¤å°†åœ¨ä»Šæ™šè¿›è¡Œ',
    time: '2å°æ—¶å‰',
    status: 'warning',
  },
])

// æ•°æ®æ ¼å¼åŒ–å‡½æ•°
function formatNumber(num) {
  return String(num)
}

function formatCurrency(amount) {
  return `Â¥${amount.toLocaleString('zh-CN')}`
}

// æ–¹æ³•
function refreshData() {
  // åˆ·æ–°æ•°æ®é€»è¾‘
  // TODO: å®ç°æ•°æ®åˆ·æ–°åŠŸèƒ½
}

function navigateToAnalytics() {
  // è·³è½¬åˆ°åˆ†æé¡µé¢
  // TODO: å®ç°åˆ†æé¡µé¢è·³è½¬
}

function navigateToSales() {
  // TODO: å®ç°é”€å”®é¡µé¢è·³è½¬
}

function navigateToOrders() {
  // TODO: å®ç°è®¢å•é¡µé¢è·³è½¬
}

function navigateToUsers() {
  // TODO: å®ç°ç”¨æˆ·é¡µé¢è·³è½¬
}

function createNews() {
  navigateTo('/admin/news/create')
}

function manageContent() {
  navigateTo('/admin/content')
}

function viewReports() {
  // TODO: å®ç°æŸ¥çœ‹æŠ¥è¡¨åŠŸèƒ½
}

function systemSettings() {
  // TODO: å®ç°ç³»ç»Ÿè®¾ç½®åŠŸèƒ½
}

function showTooltip(_point, _event) {
  // æ˜¾ç¤ºå·¥å…·æç¤º
  // TODO: å®ç°å·¥å…·æç¤ºåŠŸèƒ½
}

function hideTooltip() {
  // éšè—å·¥å…·æç¤º
  // TODO: å®ç°éšè—å·¥å…·æç¤ºåŠŸèƒ½
}
</script>

<template>
  <div class="space-y-6">
    <!-- æ¬¢è¿åŒºåŸŸ -->
    <div class="border border-gray-100 rounded-2xl bg-white p-6 shadow-sm">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="mb-2 text-2xl text-gray-900 font-bold">
            æ¬¢è¿å›æ¥! ğŸ‘‹
          </h1>
          <p class="text-gray-600">
            ä»Šå¤©ä¹Ÿæ˜¯å……æ»¡æ´»åŠ›çš„ä¸€å¤©ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ç³»ç»Ÿçš„è¿è¡Œæƒ…å†µå§
          </p>
        </div>
        <button
          class="flex items-center gap-2 rounded-xl bg-blue-50 px-4 py-2 text-blue-700 transition-colors hover:bg-blue-100"
          @click="refreshData"
        >
          <div class="i-carbon:refresh" />
          <span class="font-medium">åˆ·æ–°æ•°æ®</span>
        </button>
      </div>
    </div>

    <!-- ç»Ÿè®¡å¡ç‰‡ -->
    <div class="grid grid-cols-1 gap-6 lg:grid-cols-4 md:grid-cols-2">
      <!-- è®¿é—®é‡å¡ç‰‡ -->
      <div
        class="group cursor-pointer border border-gray-100 rounded-2xl bg-white p-6 shadow-sm transition-shadow hover:shadow-md"
        @click="navigateToAnalytics"
      >
        <div class="mb-4 flex items-center justify-between">
          <div class="h-12 w-12 flex items-center justify-center rounded-xl from-blue-500 to-blue-600 bg-gradient-to-r">
            <div class="i-carbon:user-multiple text-xl text-white" />
          </div>
          <div class="flex items-center gap-1 text-sm text-green-600 font-medium">
            <div class="i-carbon:trending-up" />
            <span>+12%</span>
          </div>
        </div>
        <div class="mb-2">
          <p class="mb-1 text-sm text-gray-600">
            ä»Šæ—¥è®¿é—®
          </p>
          <p class="text-2xl text-gray-900 font-bold">
            {{ formatNumber(8846) }}
          </p>
        </div>
        <div class="flex items-center gap-2 text-xs text-gray-500">
          <span>è¾ƒæ˜¨æ—¥</span>
        </div>
      </div>

      <!-- æ”¶å…¥å¡ç‰‡ -->
      <div
        class="group cursor-pointer border border-gray-100 rounded-2xl bg-white p-6 shadow-sm transition-shadow hover:shadow-md"
        @click="navigateToSales"
      >
        <div class="mb-4 flex items-center justify-between">
          <div class="h-12 w-12 flex items-center justify-center rounded-xl from-green-500 to-green-600 bg-gradient-to-r">
            <div class="i-carbon:currency-dollar text-xl text-white" />
          </div>
          <div class="flex items-center gap-1 text-sm text-green-600 font-medium">
            <div class="i-carbon:trending-up" />
            <span>+8%</span>
          </div>
        </div>
        <div class="mb-2">
          <p class="mb-1 text-sm text-gray-600">
            ä»Šæ—¥æ”¶å…¥
          </p>
          <p class="text-2xl text-gray-900 font-bold">
            {{ formatCurrency(12628) }}
          </p>
        </div>
        <div class="flex items-center gap-2 text-xs text-gray-500">
          <span>è¾ƒæ˜¨æ—¥</span>
        </div>
      </div>

      <!-- è®¢å•å¡ç‰‡ -->
      <div
        class="group cursor-pointer border border-gray-100 rounded-2xl bg-white p-6 shadow-sm transition-shadow hover:shadow-md"
        @click="navigateToOrders"
      >
        <div class="mb-4 flex items-center justify-between">
          <div class="h-12 w-12 flex items-center justify-center rounded-xl from-orange-500 to-orange-600 bg-gradient-to-r">
            <div class="i-carbon:shopping-cart text-xl text-white" />
          </div>
          <div class="flex items-center gap-1 text-sm text-red-600 font-medium">
            <div class="i-carbon:trending-down" />
            <span>-3%</span>
          </div>
        </div>
        <div class="mb-2">
          <p class="mb-1 text-sm text-gray-600">
            è®¢å•æ•°é‡
          </p>
          <p class="text-2xl text-gray-900 font-bold">
            {{ formatNumber(1286) }}
          </p>
        </div>
        <div class="flex items-center gap-2 text-xs text-gray-500">
          <span>è¾ƒæ˜¨æ—¥</span>
        </div>
      </div>

      <!-- ç”¨æˆ·å¡ç‰‡ -->
      <div
        class="group cursor-pointer border border-gray-100 rounded-2xl bg-white p-6 shadow-sm transition-shadow hover:shadow-md"
        @click="navigateToUsers"
      >
        <div class="mb-4 flex items-center justify-between">
          <div class="h-12 w-12 flex items-center justify-center rounded-xl from-purple-500 to-purple-600 bg-gradient-to-r">
            <div class="i-carbon:user-plus text-xl text-white" />
          </div>
          <div class="flex items-center gap-1 text-sm text-green-600 font-medium">
            <div class="i-carbon:trending-up" />
            <span>+18%</span>
          </div>
        </div>
        <div class="mb-2">
          <p class="mb-1 text-sm text-gray-600">
            æ–°å¢ç”¨æˆ·
          </p>
          <p class="text-2xl text-gray-900 font-bold">
            {{ formatNumber(458) }}
          </p>
        </div>
        <div class="flex items-center gap-2 text-xs text-gray-500">
          <span>è¾ƒæ˜¨æ—¥</span>
        </div>
      </div>
    </div>

    <!-- å›¾è¡¨å’Œæ´»åŠ¨åŒºåŸŸ -->
    <div class="grid grid-cols-1 gap-6 lg:grid-cols-3">
      <!-- æ•°æ®æ¦‚è§ˆå›¾è¡¨ -->
      <div class="border border-gray-100 rounded-2xl bg-white p-6 shadow-sm lg:col-span-2">
        <div class="mb-6 flex items-center justify-between">
          <div class="flex items-center gap-3">
            <div class="i-carbon:analytics text-xl text-blue-600" />
            <h2 class="text-lg text-gray-900 font-semibold">
              æ•°æ®æ¦‚è§ˆ
            </h2>
          </div>
          <div class="flex gap-2">
            <button class="rounded-lg bg-blue-100 px-3 py-1 text-sm text-blue-700 font-medium">
              7å¤©
            </button>
            <button class="rounded-lg px-3 py-1 text-sm text-gray-500 hover:bg-gray-100">
              30å¤©
            </button>
            <button class="rounded-lg px-3 py-1 text-sm text-gray-500 hover:bg-gray-100">
              90å¤©
            </button>
          </div>
        </div>

        <!-- ç®€åŒ–å›¾è¡¨ -->
        <div class="h-64 flex items-end justify-between gap-2">
          <div
            v-for="(point, index) in chartData"
            :key="index"
            class="group relative flex-1 cursor-pointer rounded-t-lg from-blue-500 to-blue-600 bg-gradient-to-t"
            :style="`height: ${point.value}%`"
            @mouseenter="showTooltip(point, $event)"
            @mouseleave="hideTooltip"
          >
            <div class="absolute left-1/2 transform rounded bg-gray-900 px-2 py-1 text-xs text-white opacity-0 transition-opacity -top-8 -translate-x-1/2 group-hover:opacity-100">
              {{ point.date }}: {{ point.value }}
            </div>
          </div>
        </div>

        <div class="mt-4 flex items-center gap-6">
          <div class="flex items-center gap-2">
            <div class="h-3 w-3 rounded-full bg-blue-500" />
            <span class="text-sm text-gray-600">è®¿é—®é‡</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="h-3 w-3 rounded-full bg-green-500" />
            <span class="text-sm text-gray-600">é”€å”®é¢</span>
          </div>
        </div>
      </div>

      <!-- å®æ—¶åŠ¨æ€ -->
      <div class="border border-gray-100 rounded-2xl bg-white p-6 shadow-sm">
        <div class="mb-6 flex items-center gap-3">
          <div class="i-carbon:notification text-xl text-blue-600" />
          <h2 class="text-lg text-gray-900 font-semibold">
            å®æ—¶åŠ¨æ€
          </h2>
        </div>

        <div class="space-y-4">
          <div
            v-for="activity in activities"
            :key="activity.title"
            class="flex items-start gap-3 rounded-xl p-3 transition-colors hover:bg-gray-50"
          >
            <div
              class="h-8 w-8 flex flex-shrink-0 items-center justify-center rounded-lg"
              :class="{
                'bg-green-100 text-green-600': activity.status === 'success',
                'bg-yellow-100 text-yellow-600': activity.status === 'warning',
                'bg-blue-100 text-blue-600': activity.status === 'pending',
              }"
            >
              <div :class="activity.icon" />
            </div>
            <div class="min-w-0 flex-1">
              <p class="mb-1 text-sm text-gray-900 font-medium">
                {{ activity.title }}
              </p>
              <p class="mb-1 text-xs text-gray-600">
                {{ activity.description }}
              </p>
              <p class="text-xs text-gray-500">
                {{ activity.time }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- å¿«æ·æ“ä½œ -->
    <div class="border border-gray-100 rounded-2xl bg-white p-6 shadow-sm">
      <h2 class="mb-4 text-lg text-gray-900 font-semibold">
        å¿«æ·æ“ä½œ
      </h2>
      <div class="grid grid-cols-1 gap-4 lg:grid-cols-4 md:grid-cols-2">
        <button
          class="group flex items-center gap-3 border border-gray-200 rounded-xl p-4 transition-colors hover:bg-gray-50"
          @click="createNews"
        >
          <div class="h-10 w-10 flex items-center justify-center rounded-lg from-blue-500 to-blue-600 bg-gradient-to-r">
            <div class="i-carbon:document-add text-white" />
          </div>
          <div class="text-left">
            <p class="text-gray-900 font-medium">
              åˆ›å»ºæ–°é—»
            </p>
            <p class="text-xs text-gray-500">
              å‘å¸ƒæ–°çš„æ–°é—»å†…å®¹
            </p>
          </div>
        </button>

        <button
          class="group flex items-center gap-3 border border-gray-200 rounded-xl p-4 transition-colors hover:bg-gray-50"
          @click="manageContent"
        >
          <div class="h-10 w-10 flex items-center justify-center rounded-lg from-green-500 to-green-600 bg-gradient-to-r">
            <div class="i-carbon:document text-white" />
          </div>
          <div class="text-left">
            <p class="text-gray-900 font-medium">
              å†…å®¹ç®¡ç†
            </p>
            <p class="text-xs text-gray-500">
              ç®¡ç†ç½‘ç«™å†…å®¹
            </p>
          </div>
        </button>

        <button
          class="group flex items-center gap-3 border border-gray-200 rounded-xl p-4 transition-colors hover:bg-gray-50"
          @click="viewReports"
        >
          <div class="h-10 w-10 flex items-center justify-center rounded-lg from-purple-500 to-purple-600 bg-gradient-to-r">
            <div class="i-carbon:chart-line text-white" />
          </div>
          <div class="text-left">
            <p class="text-gray-900 font-medium">
              æŸ¥çœ‹æŠ¥è¡¨
            </p>
            <p class="text-xs text-gray-500">
              ç”Ÿæˆæ•°æ®æŠ¥è¡¨
            </p>
          </div>
        </button>

        <button
          class="group flex items-center gap-3 border border-gray-200 rounded-xl p-4 transition-colors hover:bg-gray-50"
          @click="systemSettings"
        >
          <div class="h-10 w-10 flex items-center justify-center rounded-lg from-orange-500 to-orange-600 bg-gradient-to-r">
            <div class="i-carbon:settings text-white" />
          </div>
          <div class="text-left">
            <p class="text-gray-900 font-medium">
              ç³»ç»Ÿè®¾ç½®
            </p>
            <p class="text-xs text-gray-500">
              é…ç½®ç³»ç»Ÿå‚æ•°
            </p>
          </div>
        </button>
      </div>
    </div>
  </div>
</template>
